version: '2.0'

services:

  tm_node1: &node
    image: tendermint/tendermint:0.17.1
    container_name: tm_node1
    hostname: tm_node1
    tty: true
    ports:
      - '46667:46657'
    volumes:
      - ./node1_data:/tendermint
    entrypoint: ["sh", "-c", "tendermint node --p2p.persistent_peers=b83e8f6874ff363923b6b9121f0a6a8fcccea400@tm_node1:46656,9cd2c4f150e3af14a18b3c3ddb8add1fdefed842@tm_node2:46656,69d5488b3173e5371cd877b01d7c7928ca743228@tm_node3:46656,d31e2fde399a87ce14fcd8c479c1d63b4a981388@tm_node4:46656 --moniker=`hostname` --proxy_app=persistent_kvstore --consensus.create_empty_blocks=false"]

  tm_node2:
    <<: *node
    container_name: tm_node2
    hostname: tm_node2
    ports:
      - '46668:46657'
    volumes:
      - ./node2_data:/tendermint

  tm_node3:
    <<: *node
    container_name: tm_node3
    hostname: tm_node3
    ports:
      - '46669:46657'
    volumes:
      - ./node3_data:/tendermint

  tm_node4:
    <<: *node
    container_name: tm_node4
    hostname: tm_node4
    ports:
      - '46660:46657'
    volumes:
      - ./node4_data:/tendermint
